## 2.5 á”áŸ’ášá—áŸá‘á•áŸ’áŸáŸá„áŸ—á“áŸƒ **Action Result** á€áŸ’á“á»á„ ASP.NET Core MVC

á“áŸ…á€áŸ’á“á»á„ **ASP.NET Core MVC**, Controller method á¢á¶á… return á”áŸ’ášá—áŸá‘á•áŸ’áŸáŸá„áŸ—á“áŸƒ `ActionResult` áŠá¾á˜áŸ’á”á¸á€áŸ†áááŸ‹áá¶ HTTP Response ááŸ’ášá¼áœá•áŸ’á‰á¾á¢áŸ’áœá¸á‘áŸ… Client (Browser / API Consumer)áŸ”

---

# 1ï¸âƒ£ `IActionResult` (Dynamic Return Type)

`IActionResult` á‚áºá‡á¶ interface áŠáŸ‚á›á¢á“á»á‰áŸ’á‰á¶áá±áŸ’á™ method return á”á¶á“á…áŸ’ášá¾á“á”áŸ’ášá—áŸá‘ result á•áŸ’áŸáŸá„áŸ—áŸ”

### âœ” á–áŸá›áá¶á‚á½ášá”áŸ’ášá¾?

* á–áŸá› Action á˜á½á™á¢á¶á… return View, JSON, Redirect á¬ StatusCode áá»áŸáŸ—á‚áŸ’á“á¶
* Flexible á“á·á„ recommended

### Example:

```csharp
public IActionResult Details(int id)
{
    if (id == 0)
        return NotFound();   // 404

    return View();           // HTML View
}
```

---

# 2ï¸âƒ£ `ViewResult`

ğŸ‘‰ Return HTML View (.cshtml)

### Example:

```csharp
public ViewResult Index()
{
    return View();
}
```

### With Model:

```csharp
public IActionResult Details()
{
    var student = new Student
    {
        Id = 1,
        Name = "Sophea",
        Age = 20
    };

    return View(student);
}
```

---

# 3ï¸âƒ£ `JsonResult`

ğŸ‘‰ Return JSON Data (Mostly used for API / AJAX)

### âš  Important in ASP.NET Core:

`JsonRequestBehavior.AllowGet` **does NOT exist** in ASP.NET Core
(It was used in ASP.NET MVC 5)

### Correct ASP.NET Core Example:

```csharp
public IActionResult GetStudent()
{
    var student = new
    {
        Id = 1,
        Name = "Sophea",
        Age = 20,
        Major = "Computer Science"
    };

    return Json(student);
}
```

Or even better in Core:

```csharp
return Ok(student);
```

---

# 4ï¸âƒ£ `ContentResult`

ğŸ‘‰ Return plain text / HTML / XML manually

### Plain Text:

```csharp
public ContentResult GetText()
{
    return Content("Hello World");
}
```

### HTML:

```csharp
public ContentResult GetHtml()
{
    return Content("<h1>Hello World</h1>", "text/html");
}
```

### XML:

```csharp
public ContentResult GetXml()
{
    return Content("<student><id>1</id><name>Sophea</name></student>", "application/xml");
}
```

---

# 5ï¸âƒ£ `RedirectResult`

ğŸ‘‰ Redirect to external or specific URL

### Example:

```csharp
public RedirectResult GoToGoogle()
{
    return Redirect("https://www.google.com");
}
```

### Redirect to internal path:

```csharp
public RedirectResult RedirectToHome()
{
    return Redirect("/Home/Index");
}
```

---

# 6ï¸âƒ£ `RedirectToActionResult`

ğŸ‘‰ Redirect to another Action (Recommended for internal navigation)

### Same Controller:

```csharp
return RedirectToAction("Index");
```

### Another Controller:

```csharp
return RedirectToAction("Index", "Home");
```

### With Parameter:

```csharp
return RedirectToAction("Details", "Student", new { id = 1 });
```

---

# 7ï¸âƒ£ `StatusCodeResult`

ğŸ‘‰ Return specific HTTP Status Code

### Example:

```csharp
return StatusCode(404);
```

Better alternatives:

```csharp
return NotFound();      // 404
return BadRequest();    // 400
return Unauthorized();  // 401
return Ok();            // 200
```

---

# 8ï¸âƒ£ `PartialViewResult`

ğŸ‘‰ Return Partial View (_Partial.cshtml)

### When to use?

* AJAX load content
* Reusable UI component
* Update only part of page

### Example:

```csharp
public PartialViewResult StudentList()
{
    var students = new List<Student>
    {
        new Student { Id = 1, Name = "Sophea" },
        new Student { Id = 2, Name = "Dara" }
    };

    return PartialView("_StudentList", students);
}
```

---

# 9 `FileResult`

## âœ” á‚áŸ„á›á”áŸ†áá„

Return file á‘áŸ… browser (Download á¬ Display)

## âœ” Use Cases

* Download PDF
* Export Excel
* Download Image
* Export Report

---

## ğŸ”¹ Base Class

`FileResult` á‚áºá‡á¶ abstract class
á˜á¶á“ derived typesáŸ–

* `FileContentResult`
* `FileStreamResult`
* `VirtualFileResult`
* `PhysicalFileResult`

---

## ğŸ§© 1. FileContentResult

ğŸ‘‰ Return file from byte[]

### Example: Download PDF

```csharp
public IActionResult DownloadPdf()
{
    byte[] fileBytes = System.IO.File.ReadAllBytes("wwwroot/files/sample.pdf");
    return File(fileBytes, "application/pdf", "sample.pdf");
}
```

---

## ğŸ§© 2. FileStreamResult

ğŸ‘‰ Return file using Stream (Better for large files)

```csharp
public IActionResult DownloadLargeFile()
{
    var stream = new FileStream("wwwroot/files/video.mp4", FileMode.Open);
    return File(stream, "video/mp4", "video.mp4");
}
```

âœ” Recommended for large file performance

---

## ğŸ§© 3. VirtualFileResult

ğŸ‘‰ Return file from wwwroot

```csharp
public IActionResult GetImage()
{
    return File("~/images/logo.png", "image/png");
}
```

---

## ğŸ§© 4. PhysicalFileResult

ğŸ‘‰ Return file from full physical path

```csharp
public IActionResult GetFile()
{
    string path = @"C:\Files\report.pdf";
    return PhysicalFile(path, "application/pdf", "report.pdf");
}
```

---

## ğŸ”¥ Professional Example (Export Excel)

```csharp
public IActionResult ExportExcel()
{
    byte[] content = GenerateExcel(); // your custom method
    return File(content,
                "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
                "Report.xlsx");
}
```

---

# 10 `EmptyResult`

## âœ” á‚áŸ„á›á”áŸ†áá„

Return nothing (No content)

ğŸ‘‰ HTTP Response = 200 OK
ğŸ‘‰ No body content

---

## âœ” Use Cases

* AJAX call that does not need response
* Logging action
* Background trigger
* Silent success

---

## Example:

```csharp
public EmptyResult LogAction()
{
    // do some logging
    return new EmptyResult();
}
```

---

## Better Alternative in ASP.NET Core

Instead of:

```csharp
return new EmptyResult();
```

You can use:

```csharp
return NoContent();   // 204
```

âœ” `NoContent()` is cleaner and REST-friendly.

---

# ğŸ” Difference Summary

| Result Type | Return  | HTTP Status | Use Case        |
| ----------- | ------- | ----------- | --------------- |
| FileResult  | File    | 200         | Download/export |
| EmptyResult | Nothing | 200         | Silent action   |
| NoContent() | Nothing | 204         | REST API        |


